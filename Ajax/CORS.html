<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
	</head>

	<body>
		<script>
			function createCORSRequest(method, url) {
				var xhr = new XMLHttpRequest();
				if ("withCredentials" in xhr) {
					// 此时即支持CORS的情况  
					// 检查XMLHttpRequest对象是否有“withCredentials”属性  
					// “withCredentials”仅存在于XMLHTTPRequest2对象里  
					alert(1);
					xhr.open(method, url, true);
				} else if (typeof XDomainRequest != "undefined") {
					// 否则检查是否支持XDomainRequest，IE8和IE9支持  
					// XDomainRequest仅存在于IE中，是IE用于支持CORS请求的方式  
					xhr = new XDomainRequest();
					xhr.open(method, url);
					alert(2);
				} else {
					// 否则，浏览器不支持CORS  
					xhr = null;
					alert(3);
				}
				return xhr;
			}
			var url="ajaxtest.txt";
			var xhr = createCORSRequest('GET', url);
			if (!xhr) {
				alert('CORS not supported');
			}

		</script>
	</body>

</html>