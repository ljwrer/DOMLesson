<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript" src="../js/base.js" ></script>
	</head>

	<body>
		<p data-name = "Ray" data-age = "23" data-phone-number-home="123456" class="pp">a</p>
		<script>
			var p=document.getElementsByTagName("p")[0];
			function repalceChar(str,char){
				var i;
				while((i=str.indexOf(char))!=-1){
					str=str.slice(0,i)+str.charAt(i+1).toUpperCase()+str.slice(i+2);
				}
				return str;
			}
			function getDataset(node){
				var result={}
				if(node.dataset){
					result=node.dataset;
				}
				else
				{
					var nodeAtt=node.attributes;
					var len=nodeAtt.length;
					var i=0;
					var name='',value='';
					for(;i<len;i++)
					{
						if(/^(data-)/.test(nodeAtt[i].nodeName))
						{
							name=nodeAtt[i].nodeName.slice(5);
							name=repalceChar(name,'-');
							value=nodeAtt[i].nodeValue;
							result[name]=value;
						}
					}
				}
				return result;
			}
			var dataset=getDataset(p);
			println(dataset.name);
			println(dataset.age);
//			println(p.dataset.phoneNumberHome);
			println(dataset.phoneNumberHome)
		</script>
	</body>
</html>
